{"version":3,"file":"index-DrDgyqM3.js","sources":["../../apps/starter/data/affine-snapshot.ts","../../apps/starter/data/database.ts","../../apps/starter/data/embed.ts","../../apps/starter/data/empty.ts","../../apps/starter/data/heavy.ts","../../apps/starter/data/heavy-whiteboard.ts","../../apps/starter/data/linked.ts","../../apps/starter/data/multiple-editor.ts","../../apps/starter/data/pending-structs.ts","../../apps/starter/data/preset.ts","../../apps/starter/data/synced.ts","../../apps/starter/data/version-mismatch.ts"],"sourcesContent":["import { AffineSchemas } from '@blocksuite/affine/schemas';\nimport { Schema, Text, type Workspace } from '@blocksuite/affine/store';\nimport { ZipTransformer } from '@blocksuite/affine/widgets/linked-doc';\nexport async function affineSnapshot(collection: Workspace, id: string) {\n  const doc = collection.createDoc(id);\n  doc.load();\n  const store = doc.getStore();\n  // Add root block and surface block at root level\n  const rootId = store.addBlock('affine:page', {\n    title: new Text('Affine Snapshot Test'),\n  });\n  store.addBlock('affine:surface', {}, rootId);\n\n  const path = '/apps/starter/data/snapshots/affine-default.zip';\n  const response = await fetch(path);\n  const file = await response.blob();\n  const schema = new Schema();\n  schema.register(AffineSchemas);\n  await ZipTransformer.importDocs(collection, schema, file);\n}\n\naffineSnapshot.id = 'affine-snapshot';\naffineSnapshot.displayName = 'Affine Snapshot Test';\naffineSnapshot.description = 'Affine Snapshot Test';\n","import {\n  DatabaseBlockDataSource,\n  databaseBlockProperties,\n} from '@blocksuite/affine/blocks/database';\nimport {\n  type DatabaseBlockModel,\n  type ListType,\n  type ParagraphType,\n} from '@blocksuite/affine/model';\nimport { Text, type Workspace } from '@blocksuite/affine/store';\nimport { groupTraitKey } from '@blocksuite/data-view';\nimport { propertyPresets } from '@blocksuite/data-view/property-presets';\nimport { viewPresets } from '@blocksuite/data-view/view-presets';\n\nimport type { InitFn } from './utils.js';\n\nexport const database: InitFn = (collection: Workspace, id: string) => {\n  const doc = collection.createDoc(id);\n  const store = doc.getStore();\n\n  doc.load(() => {\n    // Add root block and surface block at root level\n    const rootId = store.addBlock('affine:page', {\n      title: new Text('BlockSuite Playground'),\n    });\n    store.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = store.addBlock('affine:note', {}, rootId);\n    const pId = store.addBlock('affine:paragraph', {}, noteId);\n    const model = store.getModelById(pId);\n    if (!model) {\n      throw new Error('model is not found');\n    }\n    const addDatabase = (title: string, group = true) => {\n      const databaseId = store.addBlock(\n        'affine:database',\n        {\n          columns: [],\n          cells: {},\n        },\n        noteId\n      );\n      const database = store.getModelById(databaseId) as DatabaseBlockModel;\n      const datasource = new DatabaseBlockDataSource(database);\n      datasource.viewManager.viewAdd('table');\n      database.props.title = new Text(title);\n      const richTextId = datasource.propertyAdd('end', {\n        type: databaseBlockProperties.richTextColumnConfig.type,\n        name: 'Rich Text',\n      });\n      Object.values([\n        propertyPresets.multiSelectPropertyConfig,\n        propertyPresets.datePropertyConfig,\n        propertyPresets.numberPropertyConfig,\n        databaseBlockProperties.linkColumnConfig,\n        propertyPresets.checkboxPropertyConfig,\n        propertyPresets.progressPropertyConfig,\n      ]).forEach(column => {\n        datasource.propertyAdd('end', {\n          type: column.type,\n          name: column.config.name,\n        });\n      });\n      if (group) {\n        const groupTrait =\n          datasource.viewManager.currentView$.value?.traitGet(groupTraitKey);\n        groupTrait?.changeGroup(database.props.columns[1].id);\n      }\n      const paragraphTypes: ParagraphType[] = [\n        'text',\n        'quote',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6',\n      ];\n      paragraphTypes.forEach(type => {\n        const id = store.addBlock(\n          'affine:paragraph',\n          { type: type, text: new Text(`Paragraph type ${type}`) },\n          databaseId\n        );\n        if (richTextId) {\n          datasource.cellValueChange(\n            id,\n            richTextId,\n            new Text(`Paragraph type ${type}`)\n          );\n        }\n      });\n      const listTypes: ListType[] = ['numbered', 'bulleted', 'todo', 'toggle'];\n\n      listTypes.forEach(type => {\n        const id = store.addBlock(\n          'affine:list',\n          { type: type, text: new Text(`List type ${type}`) },\n          databaseId\n        );\n        if (richTextId) {\n          datasource.cellValueChange(\n            id,\n            richTextId,\n            new Text(`List type ${type}`)\n          );\n        }\n      });\n      // Add a paragraph after database\n      store.addBlock('affine:paragraph', {}, noteId);\n      store.addBlock('affine:paragraph', {}, noteId);\n      store.addBlock('affine:paragraph', {}, noteId);\n      store.addBlock('affine:paragraph', {}, noteId);\n      store.addBlock('affine:paragraph', {}, noteId);\n      datasource.viewManager.viewAdd(viewPresets.kanbanViewMeta.type);\n\n      store.resetHistory();\n    };\n    // Add database block inside note block\n    addDatabase('Database 1', false);\n    addDatabase('Database 2');\n    addDatabase('Database 3');\n    addDatabase('Database 4');\n    addDatabase('Database 5');\n    addDatabase('Database 6');\n    addDatabase('Database 7');\n    addDatabase('Database 8');\n    addDatabase('Database 9');\n    addDatabase('Database 10');\n  });\n};\n\ndatabase.id = 'database';\ndatabase.displayName = 'Database Example';\ndatabase.description = 'Database block basic example';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\n\nimport type { InitFn } from './utils.js';\n\nexport const embed: InitFn = (collection: Workspace, id: string) => {\n  const doc = collection.getDoc(id) ?? collection.createDoc(id);\n  const store = doc.getStore();\n  doc.clear();\n\n  doc.load(() => {\n    // Add root block and surface block at root level\n    const rootId = store.addBlock('affine:page', {\n      title: new Text(),\n    });\n\n    const surfaceId = store.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = store.addBlock('affine:note', {}, rootId);\n    // Add paragraph block inside note block\n    store.addBlock('affine:paragraph', {}, noteId);\n\n    store.addBlock(\n      'affine:embed-github',\n      {\n        url: 'https://github.com/toeverything/AFFiNE/pull/5453',\n      },\n      noteId\n    );\n    store.addBlock(\n      'affine:embed-github',\n      {\n        url: 'https://www.github.com/toeverything/blocksuite/pull/5927',\n        style: 'vertical',\n        xywh: '[0, 400, 364, 390]',\n      },\n      surfaceId\n    );\n    store.addBlock(\n      'affine:embed-github',\n      {\n        url: 'https://github.com/Milkdown/milkdown/pull/1215',\n        xywh: '[500, 400, 752, 116]',\n      },\n      surfaceId\n    );\n    store.addBlock('affine:paragraph', {}, noteId);\n  });\n\n  store.resetHistory();\n};\n\nembed.id = 'embed';\nembed.displayName = 'Example for embed blocks';\nembed.description = 'Example for embed blocks';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\n\nimport type { InitFn } from './utils.js';\n\nexport const empty: InitFn = (collection: Workspace, id: string) => {\n  const doc = collection.getDoc(id) ?? collection.createDoc(id);\n  const store = doc.getStore();\n  doc.clear();\n\n  doc.load(() => {\n    // Add root block and surface block at root level\n    const rootId = store.addBlock('affine:page', {\n      title: new Text(),\n    });\n\n    store.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = store.addBlock('affine:note', {}, rootId);\n    // Add paragraph block inside note block\n    store.addBlock('affine:paragraph', {}, noteId);\n  });\n\n  store.resetHistory();\n};\n\nempty.id = 'empty';\nempty.displayName = 'Empty Editor';\nempty.description = 'Start from empty editor';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\n\nimport type { InitFn } from './utils.js';\n\nconst params = new URLSearchParams(location.search);\n\nexport const heavy: InitFn = (collection: Workspace, docId: string) => {\n  const count = Number(params.get('count')) || 1000;\n\n  const doc = collection.createDoc(docId);\n  const store = doc.getStore();\n  doc.load(() => {\n    // Add root block and surface block at root level\n    const rootId = store.addBlock('affine:page', {\n      title: new Text(),\n    });\n    store.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = store.addBlock('affine:note', {}, rootId);\n    for (let i = 0; i < count; i++) {\n      // Add paragraph block inside note block\n      store.addBlock(\n        'affine:paragraph',\n        {\n          text: new Text('Hello, world! ' + i),\n        },\n        noteId\n      );\n    }\n  });\n};\n\nheavy.id = 'heavy';\nheavy.displayName = 'Heavy Example';\nheavy.description = 'Heavy example on thousands of paragraph blocks';\n","import type { SerializedXYWH } from '@blocksuite/affine/global/gfx';\nimport {\n  Boxed,\n  nanoid,\n  native2Y,\n  Text,\n  type Workspace,\n} from '@blocksuite/affine/store';\nimport { DEFAULT_ROUGHNESS } from '@blocksuite/affine-model';\nimport type * as Y from 'yjs';\n\nimport type { InitFn } from './utils.js';\n\nconst SHAPE_TYPES = ['rect', 'triangle', 'ellipse', 'diamond'];\nconst params = new URLSearchParams(location.search);\n\nfunction createShapes(count: number): Record<string, unknown> {\n  const surfaceBlocks: Record<string, unknown> = {};\n\n  for (let i = 0; i < count; i++) {\n    const x = Math.random() * count * 2;\n    const y = Math.random() * count * 2;\n    const id = nanoid();\n    surfaceBlocks[id] = native2Y(\n      {\n        id,\n        index: 'a0',\n        type: 'shape',\n        xywh: `[${x},${y},100,100]`,\n        seed: Math.floor(Math.random() * 2 ** 31),\n        shapeType: SHAPE_TYPES[Math.floor(Math.random() * 40) % 4],\n        radius: 0,\n        filled: false,\n        fillColor: '--affine-palette-shape-yellow',\n        strokeWidth: 4,\n        strokeColor: '--affine-palette-line-yellow',\n        strokeStyle: 'solid',\n        roughness: DEFAULT_ROUGHNESS,\n      },\n      { deep: false }\n    );\n  }\n  return surfaceBlocks;\n}\n\nconst SHAPES_COUNT = 100;\nconst RANGE = 2000;\n\nexport const heavyWhiteboard: InitFn = (collection: Workspace, id: string) => {\n  const count = Number(params.get('count')) || SHAPES_COUNT;\n  const enableShapes = !!params.get('shapes');\n\n  const doc = collection.createDoc(id);\n  const store = doc.getStore();\n  doc.load(() => {\n    // Add root block and surface block at root level\n    const rootId = store.addBlock('affine:page', {\n      title: new Text(),\n    });\n\n    const surfaceBlocks = enableShapes ? createShapes(count) : {};\n\n    store.addBlock(\n      'affine:surface',\n      {\n        elements: new Boxed(native2Y(surfaceBlocks, { deep: false })) as Boxed<\n          Y.Map<Y.Map<unknown>>\n        >,\n      },\n      rootId\n    );\n\n    let i = 0;\n    // Add note block inside root block\n    for (i = 0; i < count; i++) {\n      const x = Math.random() * RANGE - RANGE / 2;\n      const y = Math.random() * RANGE - RANGE / 2;\n      const noteId = store.addBlock(\n        'affine:note',\n        {\n          xywh: `[${x}, ${y}, 100, 50]` as SerializedXYWH,\n        },\n        rootId\n      );\n      // Add paragraph block inside note block\n      store.addBlock(\n        'affine:paragraph',\n        {\n          text: new Text('Note #' + i),\n        },\n        noteId\n      );\n    }\n  });\n};\n\nheavyWhiteboard.id = 'heavy-whiteboard';\nheavyWhiteboard.displayName = 'Heavy Whiteboard';\nheavyWhiteboard.description = 'Heavy Whiteboard on 200 elements by default';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\n\nimport type { InitFn } from './utils.js';\n\nexport const linked: InitFn = (collection: Workspace, id: string) => {\n  const docA =\n    collection.getDoc(id)?.getStore({ id }) ??\n    collection.createDoc(id).getStore({ id });\n\n  const docBId = 'doc:linked-page';\n  const docB = collection.createDoc(docBId).getStore();\n\n  const docCId = 'doc:linked-edgeless';\n  const docC = collection.createDoc(docCId).getStore();\n\n  docA.doc.clear();\n  docB.doc.clear();\n  docC.doc.clear();\n\n  docB.load(() => {\n    const rootId = docB.addBlock('affine:page', {\n      title: new Text(''),\n    });\n\n    docB.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = docB.addBlock('affine:note', {}, rootId);\n    // Add paragraph block inside note block\n    docB.addBlock('affine:paragraph', {}, noteId);\n  });\n\n  docC.load(() => {\n    const rootId = docC.addBlock('affine:page', {\n      title: new Text(''),\n    });\n\n    docC.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = docC.addBlock('affine:note', {}, rootId);\n    // Add paragraph block inside note block\n    docC.addBlock('affine:paragraph', {}, noteId);\n  });\n\n  docA.load();\n  // Add root block and surface block at root level\n  const rootId = docA.addBlock('affine:page', {\n    title: new Text('Doc A'),\n  });\n\n  docA.addBlock('affine:surface', {}, rootId);\n\n  // Add note block inside root block\n  const noteId = docA.addBlock('affine:note', {}, rootId);\n  // Add paragraph block inside note block\n  docA.addBlock('affine:paragraph', {}, noteId);\n\n  docA.addBlock('affine:embed-linked-doc', { pageId: docBId }, noteId);\n\n  docA.addBlock(\n    'affine:embed-linked-doc',\n    { pageId: 'doc:deleted-example' },\n    noteId\n  );\n\n  docA.addBlock('affine:embed-linked-doc', { pageId: docCId }, noteId);\n\n  docA.addBlock(\n    'affine:embed-linked-doc',\n    { pageId: 'doc:deleted-example-edgeless' },\n    noteId\n  );\n\n  docA.resetHistory();\n  docB.resetHistory();\n  docC.resetHistory();\n};\n\nlinked.id = 'linked';\nlinked.displayName = 'Linked Doc Editor';\nlinked.description = 'A demo with linked docs';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\n\nimport { createTestEditor } from '../utils/extensions.js';\nimport type { InitFn } from './utils.js';\n\nexport const multiEditor: InitFn = (collection: Workspace, id: string) => {\n  const doc = collection.createDoc(id).getStore({ id });\n  doc.load(() => {\n    // Add root block and surface block at root level\n    const rootId = doc.addBlock('affine:page', {\n      title: new Text(),\n    });\n\n    doc.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = doc.addBlock('affine:note', {}, rootId);\n    // Add paragraph block inside note block\n    doc.addBlock('affine:paragraph', {}, noteId);\n  });\n\n  doc.resetHistory();\n\n  const app = document.getElementById('app');\n  if (app) {\n    const editor = createTestEditor(doc, collection);\n    editor.style.borderRight = '1px solid var(--affine-border-color)';\n\n    app.append(editor);\n    app.style.display = 'flex';\n  }\n};\n\nmultiEditor.id = 'multiple-editor';\nmultiEditor.displayName = 'Multiple Editor Example';\nmultiEditor.description = 'Multiple Editor basic example';\n\nexport const multiEditorVertical: InitFn = (\n  collection: Workspace,\n  docId: string\n) => {\n  const doc = collection.createDoc(docId).getStore();\n  doc.load(() => {\n    // Add root block and surface block at root level\n    const rootId = doc.addBlock('affine:page', {\n      title: new Text(),\n    });\n\n    doc.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = doc.addBlock('affine:note', {}, rootId);\n    // Add paragraph block inside note block\n    doc.addBlock('affine:paragraph', {}, noteId);\n  });\n\n  doc.resetHistory();\n\n  const app = document.getElementById('app');\n  if (app) {\n    const editor = createTestEditor(doc, collection);\n    editor.style.borderBottom = '1px solid var(--affine-border-color)';\n\n    app.append(editor);\n    app.style.display = 'flex';\n    app.style.flexDirection = 'column';\n  }\n};\n\nmultiEditorVertical.id = 'multiple-editor-vertical';\nmultiEditorVertical.displayName = 'Vertical Multiple Editor Example';\nmultiEditorVertical.description = 'Multiple Editor vertical layout example';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\nimport * as Y from 'yjs';\n\nimport type { InitFn } from './utils.js';\n\nexport const pendingStructs: InitFn = (collection: Workspace, id: string) => {\n  const doc = collection.createDoc(id).getStore({ id });\n  const tempDoc = collection.createDoc('tempDoc').getStore();\n  doc.load();\n  tempDoc.load(() => {\n    const rootId = tempDoc.addBlock('affine:page', {\n      title: new Text('Pending Structs'),\n    });\n    const vec = Y.encodeStateVector(tempDoc.spaceDoc);\n\n    // To avoid pending structs, uncomment the following line\n    // const update = Y.encodeStateAsUpdate(tempDoc.spaceDoc);\n\n    tempDoc.addBlock('affine:surface', {}, rootId);\n    // Add note block inside root block\n    const noteId = tempDoc.addBlock('affine:note', {}, rootId);\n    tempDoc.addBlock(\n      'affine:paragraph',\n      {\n        text: new Text('This is a paragraph block'),\n      },\n      noteId\n    );\n    const diff = Y.encodeStateAsUpdate(tempDoc.spaceDoc, vec);\n    // To avoid pending structs, uncomment the following line\n    // Y.applyUpdate(doc.spaceDoc, update);\n\n    Y.applyUpdate(doc.spaceDoc, diff);\n  });\n};\n\npendingStructs.id = 'pending-structs';\npendingStructs.displayName = 'Pending Structs';\npendingStructs.description = 'Doc with pending structs';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\nimport { MarkdownTransformer } from '@blocksuite/affine/widgets/linked-doc';\nimport { getTestStoreManager } from '@blocksuite/integration-test/store';\n\nimport type { InitFn } from './utils.js';\n\nconst presetMarkdown = `Click the ðŸ” button to switch between editors dynamically - they are fully compatible!`;\n\nexport const preset: InitFn = async (collection: Workspace, id: string) => {\n  let doc = collection.getDoc(id);\n  const hasDoc = !!doc;\n  if (!doc) {\n    doc = collection.createDoc(id);\n  }\n\n  const store = doc.getStore({ id });\n  store.load();\n\n  // Run only once on all clients.\n  let noteId: string;\n  if (!hasDoc) {\n    // Add root block and surface block at root level\n    const rootId = store.addBlock('affine:page', {\n      title: new Text('BlockSuite Playground'),\n    });\n    store.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    noteId = store.addBlock(\n      'affine:note',\n      { xywh: '[0, 100, 800, 640]' },\n      rootId\n    );\n    // Import preset markdown content inside note block\n    await MarkdownTransformer.importMarkdownToBlock({\n      doc: store,\n      blockId: noteId,\n      markdown: presetMarkdown,\n      extensions: getTestStoreManager().get('store'),\n    });\n  }\n\n  store.resetHistory();\n};\n\npreset.id = 'preset';\npreset.displayName = 'BlockSuite Starter';\npreset.description = 'Start from friendly introduction';\n","import { Text, type Workspace } from '@blocksuite/affine/store';\nimport { MarkdownTransformer } from '@blocksuite/affine/widgets/linked-doc';\nimport { getTestStoreManager } from '@blocksuite/integration-test/store';\n\nimport type { InitFn } from './utils';\n\nconst syncedDocMarkdown = `We share some of our findings from developing local-first software prototypes at [Ink & Switch](https://www.inkandswitch.com/) over the course of several years. These experiments test the viability of CRDTs in practice, and explore the user interface challenges for this new data model. Lastly, we suggest some next steps for moving towards local-first software: for researchers, for app developers, and a startup opportunity for entrepreneurs.\n\nThis article has also been published [in PDF format](https://www.inkandswitch.com/local-first/static/local-first.pdf) in the proceedings of the [Onward! 2019 conference](https://2019.splashcon.org/track/splash-2019-Onward-Essays). Please cite it as:\n\n> Martin Kleppmann, Adam Wiggins, Peter van Hardenberg, and Mark McGranaghan. Local-first software: you own your data, in spite of the cloud. 2019 ACM SIGPLAN International Symposium on New Ideas, New Paradigms, and Reflections on Programming and Software (Onward!), October 2019, pages 154-178. [doi:10.1145/3359591.3359737](https://doi.org/10.1145/3359591.3359737)\n\nWe welcome your feedback: [@inkandswitch](https://twitter.com/inkandswitch) or hello@inkandswitch.com.`;\n\nexport const synced: InitFn = (collection: Workspace, id: string) => {\n  const docMain =\n    collection.getDoc(id)?.getStore({ id }) ??\n    collection.createDoc(id).getStore({ id });\n\n  const docSyncedPageId = 'doc:synced-page';\n  const docSyncedPage = collection.createDoc(docSyncedPageId).getStore();\n\n  const docSyncedEdgelessId = 'doc:synced-edgeless';\n  const docSyncedEdgeless = collection\n    .createDoc(docSyncedEdgelessId)\n    .getStore();\n\n  docMain.doc.clear();\n  docSyncedPage.doc.clear();\n  docSyncedEdgeless.doc.clear();\n\n  docSyncedPage.load(() => {\n    // Add root block and surface block at root level\n    const rootId = docSyncedPage.addBlock('affine:page', {\n      title: new Text('Synced - Page View'),\n    });\n\n    docSyncedPage.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = docSyncedPage.addBlock('affine:note', {}, rootId);\n\n    // Add markdown to note block\n    MarkdownTransformer.importMarkdownToBlock({\n      doc: docSyncedPage,\n      blockId: noteId,\n      markdown: syncedDocMarkdown,\n      extensions: getTestStoreManager().get('store'),\n    }).catch(console.error);\n  });\n\n  docSyncedEdgeless.load(() => {\n    // Add root block and surface block at root level\n    const rootId = docSyncedEdgeless.addBlock('affine:page', {\n      title: new Text('Synced - Edgeless View'),\n    });\n\n    docSyncedEdgeless.addBlock('affine:surface', {}, rootId);\n\n    // Add note block inside root block\n    const noteId = docSyncedEdgeless.addBlock('affine:note', {}, rootId);\n\n    // Add markdown to note block\n    MarkdownTransformer.importMarkdownToBlock({\n      doc: docSyncedEdgeless,\n      blockId: noteId,\n      markdown: syncedDocMarkdown,\n      extensions: getTestStoreManager().get('store'),\n    }).catch(console.error);\n  });\n\n  docMain.load(() => {\n    // Add root block and surface block at root level\n    const rootId = docMain.addBlock('affine:page', {\n      title: new Text('Home doc, having synced blocks'),\n    });\n\n    const surfaceId = docMain.addBlock('affine:surface', {}, rootId);\n    const noteId = docMain.addBlock('affine:note', {}, rootId);\n\n    // Add markdown to note block\n    MarkdownTransformer.importMarkdownToBlock({\n      doc: docMain,\n      blockId: noteId,\n      markdown: syncedDocMarkdown,\n      extensions: getTestStoreManager().get('store'),\n    })\n      .then(() => {\n        // Add synced block - self\n        docMain.addBlock(\n          'affine:paragraph',\n          {\n            text: new Text('Cyclic / Matryoshka synced block ðŸ‘‡'),\n            type: 'h4',\n          },\n          noteId\n        );\n\n        // Add synced block - self\n        docMain.addBlock(\n          'affine:embed-synced-doc',\n          {\n            pageId: id,\n          },\n          noteId\n        );\n\n        // Add synced block - page view\n        docMain.addBlock(\n          'affine:embed-synced-doc',\n          {\n            pageId: docSyncedPageId,\n          },\n          noteId\n        );\n\n        // Add synced block - edgeless view\n        docMain.addBlock(\n          'affine:embed-synced-doc',\n          {\n            pageId: docSyncedEdgelessId,\n          },\n          noteId\n        );\n\n        // Add synced block - page view\n        docMain.addBlock(\n          'affine:embed-synced-doc',\n          {\n            pageId: docSyncedPageId,\n            xywh: '[-1000, 0, 752, 455]',\n          },\n          surfaceId\n        );\n\n        // Add synced block - edgeless view\n        docMain.addBlock(\n          'affine:embed-synced-doc',\n          {\n            pageId: docSyncedEdgelessId,\n            xywh: '[-1000, 500, 752, 455]',\n          },\n          surfaceId\n        );\n\n        // Add synced block - self\n        docMain.addBlock(\n          'affine:embed-synced-doc',\n          {\n            pageId: id,\n            xywh: '[-1000, 1000, 752, 455]',\n          },\n          surfaceId\n        );\n\n        // Add synced block - self\n        docMain.addBlock(\n          'affine:embed-synced-doc',\n          {\n            pageId: 'doc:deleted-page',\n          },\n          noteId\n        );\n      })\n      .catch(console.error);\n  });\n\n  docSyncedEdgeless.resetHistory();\n  docSyncedPage.resetHistory();\n  docMain.resetHistory();\n};\n\nsynced.id = 'synced';\nsynced.displayName = 'Synced block demo';\nsynced.description = 'A simple demo for synced block';\n","import type { Workspace } from '@blocksuite/affine/store';\nimport * as Y from 'yjs';\n\nimport type { InitFn } from './utils.js';\n\nexport const versionMismatch: InitFn = (collection: Workspace, id: string) => {\n  const doc = collection.createDoc(id).getStore({ id });\n  const tempDoc = collection.createDoc('tempDoc').getStore();\n  doc.load();\n\n  tempDoc.load(() => {\n    const rootId = tempDoc.addBlock('affine:page', {});\n    tempDoc.addBlock('affine:surface', {}, rootId);\n    const noteId = tempDoc.addBlock(\n      'affine:note',\n      { xywh: '[0, 100, 800, 640]' },\n      rootId\n    );\n    const paragraphId = tempDoc.addBlock('affine:paragraph', {}, noteId);\n    const blocks = tempDoc.spaceDoc.get('blocks') as Y.Map<unknown>;\n    const paragraph = blocks.get(paragraphId) as Y.Map<unknown>;\n    paragraph.set('sys:version', (paragraph.get('sys:version') as number) + 1);\n\n    const update = Y.encodeStateAsUpdate(tempDoc.spaceDoc);\n\n    Y.applyUpdate(doc.spaceDoc, update);\n    doc.addBlock('affine:paragraph', {}, noteId);\n  });\n\n  collection.removeDoc('tempDoc');\n  doc.resetHistory();\n};\n\nversionMismatch.id = 'version-mismatch';\nversionMismatch.displayName = 'Version Mismatch';\nversionMismatch.description = 'Error boundary when version mismatch in data';\n"],"names":["affineSnapshot","collection","id","doc","store","rootId","Text","file","schema","Schema","AffineSchemas","ZipTransformer","database","noteId","pId","addDatabase","title","group","_a","databaseId","datasource","DatabaseBlockDataSource","richTextId","databaseBlockProperties","propertyPresets","column","groupTrait","groupTraitKey","type","viewPresets","embed","surfaceId","empty","params","heavy","docId","count","SHAPE_TYPES","createShapes","surfaceBlocks","i","x","y","nanoid","native2Y","DEFAULT_ROUGHNESS","SHAPES_COUNT","RANGE","heavyWhiteboard","enableShapes","Boxed","linked","_b","docA","docBId","docB","docCId","docC","multiEditor","app","editor","createTestEditor","multiEditorVertical","pendingStructs","tempDoc","vec","Y.encodeStateVector","diff","Y.encodeStateAsUpdate","Y.applyUpdate","presetMarkdown","preset","hasDoc","MarkdownTransformer","getTestStoreManager","syncedDocMarkdown","synced","docMain","docSyncedPageId","docSyncedPage","docSyncedEdgelessId","docSyncedEdgeless","versionMismatch","paragraphId","paragraph","update"],"mappings":"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"}